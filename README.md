# Dev0psPadawan_microservices
Dev0psPadawan microservices repository

**Homework docker-1**

1. Установил Docker
2. Запустил контейнер "hello-world"
3. Изучил основные команды:
- docker ps
- docker images
- docker run
- docker exec
- docker kill
- docker rm
4. Создал свой образ из контейнера



**Homework docker-2**

1. Создал новый проект (GCP) docker.
2. Установил docker-machine (встроенный в докер инструмент для создания хостов и установки на них docker engine).
3. Создал docker-хост в GCP.
4. Подготовил репозиторий для сборки образа, создав файлы:
- Dockerfile - текстовое описание нашего образа
- mongod.conf - подготовленный конфиг для mongodb
- db_config - содержит переменную окружения соссылкой на mongodb
- start.sh - скрипт запуска приложения
5. Собрал образ reddit
6. Запустил из образа контейнер.
7. Донастроил файрволл, для проходения трафика по порту 9292
8. Проверил работу контейнера на удалённом хосте в GCP.
9. Зпарегистрировался на Docker Hub.
10. Запушил созданыый мной образ на Docker Hub.
11. Запустил образ на локальной машине, выкачав его с Docker Hub.
*
12. Создал директории terraform, ansible и packer
13. В дирректории terraform, создал окружение для поднятия произвольного кол-ва инстансов (Задаётся переменной dockerhost_count).
-описал создание инстанса приложения на основе ubuntu-1604
-описал создание правил фаерволла для портов 80 и 22
14. Для использования скрипта gce.py, обеспечивающего работу динамического инвентори ansible создал service-account в google cloud для текущего проекта (данные акаунта сохоанены в /ansible/service-account.json)
-в файле dockerhost.yml описл установку необходимых пакетов, подключение репозитория с docker и установка docker
-в файле dockerapp.yml описал установку образа dev0pspadawan/otus-reddit:1.0 и старт контейнера из него, а так же трансляция порта, на котором работает приложение (9292), на стандартный http(80) хоста
15. Создан шаблон пакера, который делает образ с уже установленным Docker.
-в файле dockerhost.json описл в качестве билдера GCE и ansible в качестве провиженера образа.
